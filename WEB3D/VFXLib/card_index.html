<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <center><br><br>
    Christmas Card Message:<br><br>
    <textarea id="msg_area" rows="10" cols="50">즐거운 크리스마스&#13;&#10;보내세요!</textarea>

    <br><br><br>
    <input type="submit" value="Submit" onclick="clickSubmit()">
    </center>
</body>

<script>

    function clickSubmit() {

        var msg = document.getElementById('msg_area').value;

        for(var i=0; i<msg.length; i++) {

            if(msg[i] == ' ') {
                msg = msg.replace(' ', '%20');
            }

            if(msg[i] == '\n') {
                msg = msg.replace('\n', '%0A');
            }
        }


        // https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/btoa
        var btoa = window.btoa(encodeURIComponent(msg));
        //var atob = decodeURIComponent(window.atob(btoa));

        window.location.href = encodeURI('card.html' + '?msg=' + btoa);
    }

</script>

</html>